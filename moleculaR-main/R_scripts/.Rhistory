m[1, 1] <- num.atoms
xyz_file_generator <- function(dir) {
options(scipen = 999)
setwd(dir)
unlink(list.files(pattern = '*.xyz'))
molecules <- list.files(full.names = F, recursive = F, pattern = "standard_")
for (molecule in molecules) {
xyz <- data.frame(read.csv(molecule, header = F, col.names = c('atom','x','y','z')))
suppressMessages(xyz$atom <- plyr::mapvalues(xyz$atom,
from = c("1", "5", "6", "7", "8", "9", "14", "15", "16", "17", "35", "53","27",'28'),
to = c(
"H", "B", "C", "N", "O", "F", "Si", "P",
"S", "Cl", "Br", "I","Co", "Ni"
)
))
num.atoms <- nrow(xyz)
m <- as.data.frame(matrix(NA, ncol = 4, nrow = 2))
m[1, 1] <- num.atoms
m[is.na(m)] <- ""
names(m) <- names(xyz)
xyz <- rbind(m, xyz)
new_xyz <- knitr::kable(xyz, format = "simple", row.names = F, col.names = NULL, align = "r")
new_xyz <- new_xyz[-1]
new_xyz <- new_xyz[-length(new_xyz)]
write(new_xyz, paste(stringr::str_remove(tools::file_path_sans_ext(molecule), 'xyz_'), ".xyz", sep = ""))
}
setwd("..")
for (molecule in molecules) {
xyz <- data.frame(read.csv(molecule, header = F, col.names = c('atom','x','y','z')))
suppressMessages(xyz$atom <- plyr::mapvalues(xyz$atom, #changes atomic number to atomic symbol
from = c("1", "5", "6", "7", "8", "9", "14", "15", "16", "17", "35", "53","27",'28'),
to = c(
"H", "B", "C", "N", "O", "F", "Si", "P",
"S", "Cl", "Br", "I","Co", "Ni"
)
))
num.atoms <- nrow(xyz)
m <- as.data.frame(matrix(NA, ncol = 4, nrow = 2))
m[1, 1] <- num.atoms
m[is.na(m)] <- ""
names(m) <- names(xyz)
xyz <- rbind(m, xyz)
new_xyz <- knitr::kable(xyz, format = "simple", row.names = F, col.names = NULL, align = "r")
new_xyz <- new_xyz[-1]
new_xyz <- new_xyz[-length(new_xyz)]
write(new_xyz, paste(stringr::str_remove(tools::file_path_sans_ext(molecule), 'xyz_'), ".xyz", sep = ""))
}
